<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Checklist</title>
    <link rel="icon" type="image/png" href="./assets/img/fate_logo.png">
    <link rel="stylesheet" href="./assets/css/style.css">
    <script type="module" src="./assets/js/core/app.js"></script>
</head>
<body>
    <header>
        <details class="menu" id="main-menu" role="menu">
            <summary role="button" aria-haspopup="menu" aria-expanded="false">
                <a class="button">
                    <span class="open-icon">‚ò∞</span>
                    <span class="close-icon">‚úñ</span>
                </a>
            </summary>
            <ul>
                <li><hr class="link-separator"></li>
                <li><input type="file" id="file-input" accept=".json"></li>
                <li><a href="#" id="import-btn">Importar</a></li>
                <li><a href="#" id="export-btn">Exportar</a></li>
                <li><a href="#" id="report-btn">Generar Reporte</a></li>
                <li><a href="#" id="reset-memory-btn">Borrar memoria</a></li>
                <li><a href="#" id="reset-progress-btn">Resetear progreso</a></li>
                <li><a href="#" id="help-btn">Ayuda</a></li>
                <li><hr class="link-separator"></li>
            </ul>
        </details>
        <h1><span id="franchise-main-title"></span> Checklist</h1>
        <p>Seguimiento de tu progreso en el universo <span id="franchise-text"></span></p>
        <button class="theme-toggle" id="themeToggle">üåô</button>
    </header>

    <nav class="controls">
        <section class="filters">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="completed">Completados</button>
            <button class="filter-btn" data-filter="incomplete">No completados</button>
        </section>
    </nav>

    <main id="checklist-container">
        <!-- El contenido se generar√° din√°micamente con JavaScript -->
    </main>

    <footer class="total-progress">
        <h3>Progreso Total</h3>
        <progress id="complete-progress-bar" class="progress-bar" value="0" max="100"></progress>
        <section class="stats">
            <article class="stat">
                <p class="stat-number" id="completed-items">0</p>
                <p class="stat-label">Completados</p>
            </article>
            <article class="stat">
                <p class="stat-number" id="total-items">0</p>
                <p class="stat-label">Total</p>
            </article>
            <article class="stat">
                <p class="stat-number" id="percentage">0%</p>
                <p class="stat-label">Completado</p>
            </article>
        </section>
    </footer>

    <dialog class="modal" id="multifunction-modal"  role="dialog" aria-hidden="true">
        
        <!-- SECCI√ìN CONFIRMACI√ìN -->
        <section id="confirm-section" class="modal-section" hidden aria-hidden="true">
            <header class="confirm-header">
                <h3 id="confirm-title">Confirmar acci√≥n</h3>
            </header>
            <article class="confirm-content">
                <p id="confirm-message"><!-- Mensaje din√°mico espec√≠fico --></p>
                <p>Se perder√°n los cambios no guardados.</p>
                <p>¬øEst√°s seguro de que deseas continuar?</p>
                <footer class="modal-buttons">
            </article>
            <footer class="confirm-footer">
                <button class="btn-confirm" id="confirm-action-btn" data-action="">Confirmar</button>
                <button class="btn-cancel" id="cancel-action-btn">Cancelar</button>
            </footer>
        </section>

        <!-- SECCI√ìN DIN√ÅMICA -->
        <section id="dynamic-section" class="modal-section" hidden aria-hidden="true">
            <h3 id="dynamic-title"><!-- T√≠tulo din√°mico --></h3>
            <article id="dynamic-content"><!-- Contenido din√°mico --></article>
            <button class="btn-close" id="dynamic-close-btn">Cerrar</button>
        </section>

        <section id="help-section" class="modal-section" hidden>
            <header class="help-header">
                <h3 id="help-title">üõ†Ô∏è Centro de Ayuda</h3>
            </header>
            
            <article class="help-content">
                <!-- üíæ EXPORTAR/IMPORTAR -->
                <details open>
                    <summary><strong>üíæ Backup & Restore</strong></summary>
                    <p><strong>Exportar:</strong> Guarda tu progreso actual en JSON</p>
                    <p><strong>Importar:</strong> Carga un JSON v√°lido (reemplaza datos actuales)</p>
                    <p><strong>Generar Reporte:</strong> Genera un .txt con tu progreso actual</p>
                    <p><strong>Borrar Memoria:</strong> Borra todos los datos de la app almacenados en localStorage</p>
                    <p><strong>Resetear Progreso:</strong> Vuelve a los datos iniciales de la franquicia actual</p>
                </details>
                <!-- üì• IMPORTAR JSON -->
                <details>
                    <summary><strong>üì• Importar JSON</strong></summary>
                    <p>Estructura requerida para importar nuevas franquicias:</p>
                    <pre><code>{
  "franchise": "Nombre Franquicia",
  "sagas": [
    {
      "saga": "Nombre Saga",
      "opened": false,
      "seasons": [
        {
          "id": "id-√∫nico",
          "label": "Nombre Temporada", 
          "format": "Anime/Pel√≠cula/Especial",
          "completed": false,
          "opened": false,
          "episodes": [
            {
              "id": "ep-id-√∫nico",
              "number": 1,
              "label": "Nombre Episodio",
              "completed": false
            }
          ]
        }
      ]
    }
  ]
}</code></pre>
                </details>
                <!-- ‚ö†Ô∏è SOLUCI√ìN DE PROBLEMAS -->
                <details>
                    <summary><strong>‚ö†Ô∏è Soluci√≥n de Problemas</strong></summary>
                    <ul>
                        <li>‚úÖ Asegurate que los IDs sean √∫nicos</li>
                        <li>‚úÖ Verifica que el JSON sea v√°lido</li>
                        <li>‚úÖ Los campos "completed" y "opened" deben ser booleanos</li>
                        <li>‚ùå Si falla la importaci√≥n, revisa la consola (F12)</li>
                    </ul>
                </details>
            </article>

            <footer class="help-footer">
                <button class="btn-close" id="help-close-btn">Cerrar</button>
            </footer>
        </section>

    </dialog>
    <aside class="notification" id="notification">
        Operaci√≥n realizada con √©xito
    </aside>
</body>
</html>